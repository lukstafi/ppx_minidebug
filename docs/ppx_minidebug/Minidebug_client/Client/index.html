<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Client (ppx_minidebug.Minidebug_client.Client)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">ppx_minidebug</a> &#x00BB; <a href="../index.html">Minidebug_client</a> &#x00BB; Client</nav><header class="odoc-preamble"><h1>Module <code><span>Minidebug_client.Client</span></code></h1><p>Main client interface</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-open_db"><a href="#val-open_db" class="anchor"></a><code><span><span class="keyword">val</span> open_db : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Open database for reading</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-close"><a href="#val-close" class="anchor"></a><code><span><span class="keyword">val</span> close : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Close database connection</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_runs"><a href="#val-list_runs" class="anchor"></a><code><span><span class="keyword">val</span> list_runs : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Query/index.html#type-run_info">Query.run_info</a> list</span></span></code></div><div class="spec-doc"><p>List all runs</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_latest_run"><a href="#val-get_latest_run" class="anchor"></a><code><span><span class="keyword">val</span> get_latest_run : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Query/index.html#type-run_info">Query.run_info</a> option</span></span></code></div><div class="spec-doc"><p>Get the run in the database</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_run_summary"><a href="#val-show_run_summary" class="anchor"></a><code><span><span class="keyword">val</span> show_run_summary : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Print summary of the run with the given ID</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_stats"><a href="#val-show_stats" class="anchor"></a><code><span><span class="keyword">val</span> show_stats : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Print database statistics</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_trace"><a href="#val-show_trace" class="anchor"></a><code><span><span class="keyword">val</span> show_trace : 
  <span><span class="optlabel">?show_scope_ids</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?show_times</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?max_depth</span>:<span>int option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?values_first_mode</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Print full trace tree for a run. When <code>values_first_mode</code> is true (default), result values become headers with location/message as children.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_compact_trace"><a href="#val-show_compact_trace" class="anchor"></a><code><span><span class="keyword">val</span> show_compact_trace : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Print compact trace (function names only)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_roots"><a href="#val-show_roots" class="anchor"></a><code><span><span class="keyword">val</span> show_roots : <span><span class="optlabel">?show_times</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?with_values</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Print root entries efficiently. Fast for large databases. When <code>with_values</code> is true, includes immediate children values.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-search"><a href="#val-search" class="anchor"></a><code><span><span class="keyword">val</span> search : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">pattern</span>:string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Search and print matching entries</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-export_markdown"><a href="#val-export_markdown" class="anchor"></a><code><span><span class="keyword">val</span> export_markdown : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">output_file</span>:string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Export trace to markdown file</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-search_tree"><a href="#val-search_tree" class="anchor"></a><code><span><span class="keyword">val</span> search_tree : 
  <span><span class="optlabel">?quiet_path</span>:<span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?format</span>:<span>[ `Text <span>| `Json</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?show_times</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?max_depth</span>:<span>int option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?limit</span>:<span>int option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?offset</span>:<span>int option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">pattern</span>:string <span class="arrow">&#45;&gt;</span></span>
  int</span></code></div><div class="spec-doc"><p>Search with tree context - shows matching entries with their ancestor paths. Uses efficient ancestor propagation like the TUI. Returns number of matching scopes found.</p><p>Arguments:</p><ul><li><code>quiet_path</code>: Stop ancestor propagation when this pattern is matched</li><li><code>format</code>: Output format (Text or Json)</li><li><code>show_times</code>: Include elapsed times in output</li><li><code>max_depth</code>: Limit tree depth</li><li><code>limit</code>: Limit number of results</li><li><code>offset</code>: Skip first n results</li><li><code>pattern</code>: Search pattern (substring match)</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-search_subtree"><a href="#val-search_subtree" class="anchor"></a><code><span><span class="keyword">val</span> search_subtree : 
  <span><span class="optlabel">?quiet_path</span>:<span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?format</span>:<span>[ `Text <span>| `Json</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?show_times</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?max_depth</span>:<span>int option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?limit</span>:<span>int option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?offset</span>:<span>int option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">pattern</span>:string <span class="arrow">&#45;&gt;</span></span>
  int</span></code></div><div class="spec-doc"><p>Search and show only matching subtrees, pruning non-matching branches. Returns number of actual matches (not including propagated ancestors).</p><p>This builds a minimal tree containing only paths to matches, unlike <code>search_tree</code> which shows full context paths.</p><p>Arguments:</p><ul><li><code>limit</code>: Limit number of results</li><li><code>offset</code>: Skip first n results</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-search_intersection"><a href="#val-search_intersection" class="anchor"></a><code><span><span class="keyword">val</span> search_intersection : 
  <span><span class="optlabel">?quiet_path</span>:<span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?format</span>:<span>[ `Text <span>| `Json</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?show_times</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?max_depth</span>:<span>int option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?limit</span>:<span>int option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?offset</span>:<span>int option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">patterns</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  int</span></code></div><div class="spec-doc"><p>Search for scopes matching ALL patterns (intersection/AND logic). Returns number of scopes in the intersection.</p><p>For each pattern, runs a separate search with ancestor propagation. Then computes the intersection of matching scope IDs across all searches. Shows full tree context (ancestors) for scopes in the intersection.</p><p>Arguments:</p><ul><li><code>patterns</code>: List of 2-4 search patterns (all must match)</li><li><code>quiet_path</code>: Stop ancestor propagation at pattern (applies to all searches)</li><li><code>limit</code>: Limit number of results</li><li><code>offset</code>: Skip first n results</li></ul><p>Example: <code>search_intersection ~patterns:[&quot;(id 79)&quot;; &quot;(id 1802)&quot;] client</code> finds scopes where both patterns appear in their subtree.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_scope"><a href="#val-show_scope" class="anchor"></a><code><span><span class="keyword">val</span> show_scope : 
  <span><span class="optlabel">?format</span>:<span>[ `Text <span>| `Json</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?show_times</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?max_depth</span>:<span>int option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?show_ancestors</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">scope_id</span>:int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Show a specific scope and its descendants.</p><p>Arguments:</p><ul><li><code>show_ancestors</code>: If true, shows path from root to this scope instead of descendants</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_subtree"><a href="#val-show_subtree" class="anchor"></a><code><span><span class="keyword">val</span> show_subtree : 
  <span><span class="optlabel">?format</span>:<span>[ `Text <span>| `Json</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?show_times</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?max_depth</span>:<span>int option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?show_ancestors</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">scope_id</span>:int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Show a specific scope subtree with full tree rendering.</p><p>Displays: ancestor path (if <code>show_ancestors</code>=true) → target scope → all descendants.</p><p>Arguments:</p><ul><li><code>max_depth</code>: INCREMENTAL depth from target scope (not absolute depth from root). For example, if target is at depth 5 and max_depth=3, shows up to depth 8.</li><li><code>show_ancestors</code>: If true (default), includes ancestor path from root to scope.</li><li><code>show_times</code>: Include elapsed times in output</li><li><code>format</code>: Output format (Text or JSON)</li></ul><p>This command is useful after <code>search_intersection</code> to explore the full context of an LCA scope.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_entry"><a href="#val-show_entry" class="anchor"></a><code><span><span class="keyword">val</span> show_entry : 
  <span><span class="optlabel">?format</span>:<span>[ `Text <span>| `Json</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">scope_id</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">seq_id</span>:int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Show detailed information for a specific entry</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_ancestors"><a href="#val-get_ancestors" class="anchor"></a><code><span><span class="keyword">val</span> get_ancestors : <span><span class="optlabel">?format</span>:<span>[ `Text <span>| `Json</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">scope_id</span>:int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Get and print ancestors of a scope (list of scope IDs from root to target)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_parent"><a href="#val-get_parent" class="anchor"></a><code><span><span class="keyword">val</span> get_parent : <span><span class="optlabel">?format</span>:<span>[ `Text <span>| `Json</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">scope_id</span>:int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Get and print parent of a scope</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_children"><a href="#val-get_children" class="anchor"></a><code><span><span class="keyword">val</span> get_children : <span><span class="optlabel">?format</span>:<span>[ `Text <span>| `Json</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">scope_id</span>:int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Get and print immediate children scope IDs of a scope</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-search_at_depth"><a href="#val-search_at_depth" class="anchor"></a><code><span><span class="keyword">val</span> search_at_depth : 
  <span><span class="optlabel">?quiet_path</span>:<span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?format</span>:<span>[ `Text <span>| `Json</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?show_times</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">depth</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">pattern</span>:string <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Search and show only unique entries at a specific depth on paths to matches.</p><p>This provides a TUI-like summary view - shows only the depth-N ancestors of matching entries, giving a high-level overview without overwhelming detail.</p><p>Example: <code>search_at_depth ~depth:4 ~pattern:&quot;(id 79)&quot; ~quiet_path:&quot;env&quot;</code> shows only the depth-4 scopes that are ancestors of matches, deduplicated.</p><p>Use case: When <code>search_tree</code> returns too many results, use this to see a summary at a shallower depth, then drill down with <code>show_scope</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-search_extract"><a href="#val-search_extract" class="anchor"></a><code><span><span class="keyword">val</span> search_extract : 
  <span><span class="optlabel">?format</span>:<span>[ `Text <span>| `Json</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?show_times</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?max_depth</span>:<span>int option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">search_path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">extraction_path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Search DAG with a path pattern, then extract along a different path with deduplication.</p><p>For each match of search_path, extracts along extraction_path (which must share the first element with search_path). Prints each extracted subtree, skipping consecutive duplicates (same scope_id).</p><p>Arguments:</p><ul><li><code>search_path</code>: Sequence of patterns to match in the DAG</li><li><code>extraction_path</code>: Path to extract from each match (first element must match search_path's first element)</li><li><code>show_times</code>: Include elapsed times in output</li><li><code>max_depth</code>: Limit tree depth in extracted subtrees</li><li><code>format</code>: Output format (Text or JSON)</li></ul><p>Example: <code>search_extract ~search_path:[&quot;fn_a&quot;; &quot;param_x&quot;] ~extraction_path:[&quot;fn_a&quot;; &quot;result&quot;] client</code> finds all paths matching &quot;fn_a&quot; → &quot;param_x&quot;, then from each match extracts &quot;fn_a&quot; → &quot;result&quot; and prints unique results.</p></div></div></div></body></html>
